## Общее

- Я не подгонял архитектуру приложения, не рефакторил код с помощью ИИ, то есть всё, что написано, сделано мной и показывает мой реальный уровень знаний! Что значит что он может быть низок)

- ИИ использован для решения ошибок, проблем, для изучения новых тем, немного для составления документации, кусков кода (небольших), глобально - всё моё.

- Устал вылизывать код, поэтому полюбому будут встречаться комменты, лишние пробелы и переносы, разница в стилях. Просто решил не тратить время на второстепенные работы. Когда будет финальный проект, вот там постараюсь реализовать всё по красоте.

## Особенности

- Впервые использовал переменные окружения для секретных данных. Нраааиица.
- Все изменяемые свойства расположил в файле свойств, ничего не захардкожено, нет магических чисел и значений.
- Использовал Feign client для двух внешних ресурсов.
- Клиент для получения гифок (для получения курса тоже, но там тока логирование) настраивается с помощью класса конфигурации. В классе конфигурации используется интерцептор для добавления параметров в строку запроса, в том числе api-key. Также есть еррор декодер и ретраер.
- В контроллере реализована OpenApi документация для REST API.
- Добавил кэширование (не ясно, корректно ли).
- Впервые использовал @Testcontainers для запуска контейнера PostgreSQL в тестах.
- Маппер не использовал, так как мне не пришлось модель в дто и обратно превращать.

## Что так себе

- Да, не всё сделал по ТЗ, птму что увлекся и забывал смотреть подробности по ходу работы. В том числе параметры передаю в запросе, сервисов у меня несколько, Spring Boot не 2.Х. версии и тд. А когда почти все доделал, переслушал твои указания, и оказывается и их не все выполнил))
- Не стал использовать подход API-FIRST, так как во-первых это твое требование прослушал повторно и вспомнил о нем только в конце задачи)) Во вторых, изначально вообще не представлял, какие методы будут, как будет декомпозирована задача, какие классы нужны – просто писал код, а потом декомпозировал и выделял методы.
- Логирование для feign клиентов выводит секретные данные типа api-key (просто хотел посмотреть что выводит).
- При работе интерцептора выявил, что он добавляет параметры в запросы для всех feign клиентов, хотя в конкретных feign клиентах указан параметр «configuration = GifServiceFeignClientConfig.class» - то есть сработать должен был только для одного клиента, а срабатывал для всех.

## Вопросы по проекту

1. Правильно ли я декомпозировал и выделил такие сервисы?
2. Правильно ли использовал @Cacheable, @Transactional, @Testcontainers?
3. Интерцептор перехватывает вызовы обоих feign сервисов, хотя вроде сервисы настроил по разному (разные конфиг классы указал) – как исправить?
4. Нормально ли, что я передаю переменные окружения при запуске тестов? До этого как-то работало и без этого, но как поменял в application.yml некоторые ключи, добавив слово «test», то перестало работать без переменных окружения. Видимо и для тестов до этого читало из основного application.yml, несмотря на то, что я добавил application-test.yml?
5. Не совсем понимаю работу @Container и @DynamicPropertySource, или их нужно просто копировать?
6. Все норм в докер файлах, компоузе, в целом по упаковке?

## Запуск через Docker

### Предварительные требования
- Установленный [Docker Desktop](https://www.docker.com/products/docker-desktop/)
- API ключи: Giphy и ExchangeRate-API
- Пароль от БД

### Инструкция по запуску

1. **Распакуй архив** в любую удобную папку на своем компьютере

2. **Открой проект** в IntelliJ IDEA (для разработки/просмотра кода). 
Этот шаг необязателен, если ты хочешь просто запустить приложение через Docker, но если хочешь посмотреть код:
- Запусти IntelliJ IDEA
- Нажми **File** → **Open**
- Выбери папку, в которую распаковал архив
- Подожди, пока IDEA проиндексирует проект и скачает зависимости (это может занять несколько минут)

3. **Создай файл `.env`** в корневой папке проекта:
POSTGRES_PASSWORD=mysecretpassword
GIPHY_API_KEY=твой_ключ_giphy
EXCHANGERATE_API_KEY=твой_ключ_exchangerate

4. **Запусти приложение**:
docker-compose up -d

5. **Проверь логи**:
docker-compose logs -f app. 

6. **Дождись сообщения** "Started Application in ... seconds"

7. **Открой в браузере**:
http://localhost:8080/api/v1/gifs

8. **Чтобы остановить**:
docker-compose down

### Если нужно пересобрать после изменений
docker-compose down

docker-compose up -d --build

## Особенности работы
1) Первый запуск вернет еррорДТО, так как данных в БД нет.
2) Второй - скорее всего плаксивую гифку, так как курс постоянно падает. *плакает горька
3) Можно изменить в DBeaver (порт 5437) или еще каких прогах предыдущий результат (хотя и в IDEA можно - порт 5437) в меньшую сторону, тогда выведется позитивная гифка.